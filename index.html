<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduSmart.AI v5.0 - Plateforme Remplie et Détaillée</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /*=============================================
        =         EduSmart.AI Stylesheet v5.0         =
        =============================================*/
        :root {
          --primary-color: #4A90E2; --primary-color-dark: #357ABD; --secondary-color: #50E3C2;
          --background-color: #F4F7FC; --surface-color: #FFFFFF; --text-color: #333745;
          --text-color-light: #667085; --border-color: #E2E8F0; --error-color: #E53E3E;
          --success-color: #38A169; --warning-color: #DD6B20; --info-color: #3182CE;
          --font-primary: 'Poppins', sans-serif; --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
          --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1); --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
          --transition-fast: all 0.2s ease-in-out; --transition-smooth: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
          --header-height: 70px; --max-width: 1400px; --border-radius-md: 8px; --border-radius-lg: 16px;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body { font-family: var(--font-primary); color: var(--text-color); background-color: var(--background-color); }
        .hidden { display: none !important; }
        .container { width: 90%; max-width: var(--max-width); margin: 0 auto; }
        h2 { font-size: 2rem; color: var(--primary-color-dark); margin-bottom: 1.5rem; }
        h3 { font-size: 1.25rem; }
        .page-section { animation: fadeIn 0.5s forwards ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .widget { background: var(--surface-color); padding: 1.5rem; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-md); }
        .btn-primary { display: inline-block; background-color: var(--primary-color); color: #fff; padding: 10px 20px; border-radius: var(--border-radius-md); font-weight: 600; border: none; cursor: pointer; text-align: center; text-decoration: none; transition: var(--transition-fast); }
        .btn-primary:hover { background-color: var(--primary-color-dark); transform: translateY(-2px); }
        .btn-secondary { background: var(--surface-color); color: var(--text-color); border: 1px solid var(--border-color); padding: 8px 15px; border-radius: var(--border-radius-md); cursor: pointer; }

        /* Auth Page */
        #auth-page { display: flex; justify-content: center; align-items: center; height: 100vh; background: linear-gradient(135deg, var(--primary-color) 0%, #81C784 100%); }
        .auth-container { width: 400px; padding: 40px; background: var(--surface-color); border-radius: var(--border-radius-lg); box-shadow: var(--shadow-lg); text-align: center; }
        .auth-container h1 { color: var(--primary-color); font-size: 2rem; margin-bottom: 10px; }
        .auth-form-group { margin-bottom: 20px; text-align: left; }
        .auth-form-group input { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: var(--border-radius-md); }
        .auth-btn { width: 100%; padding: 15px; border: none; background: var(--primary-color); color: white; font-size: 1rem; font-weight: 600; border-radius: var(--border-radius-md); cursor: pointer; }

        /* Header & Nav */
        #main-header { background-color: var(--surface-color); box-shadow: var(--shadow-md); position: fixed; top: 0; left: 0; width: 100%; height: var(--header-height); z-index: 1000; display: flex; align-items: center; }
        .header-content { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .logo a { font-size: 1.8rem; font-weight: 700; color: var(--primary-color); text-decoration: none; }
        #main-header nav ul { display: flex; gap: .5rem; list-style: none; }
        #main-header nav a { display: flex; align-items: center; gap: 8px; padding: 8px 12px; color: var(--text-color-light); font-weight: 500; border-radius: var(--border-radius-md); text-decoration: none; position: relative; }
        #main-header nav a::after { content: ''; position: absolute; bottom: -2px; left: 50%; transform: translateX(-50%); width: 0; height: 3px; background: var(--primary-color); transition: width 0.3s ease; }
        #main-header nav a.active, #main-header nav a:hover { color: var(--primary-color); background-color: var(--background-color); }
        #main-header nav a.active::after { width: 80%; }
        .user-actions { display: flex; align-items: center; gap: 1.5rem; }
        .user-actions a { text-decoration: none; color: var(--text-color); }
        .menu-toggle { display: none; background: none; border: none; font-size: 1.5rem; cursor: pointer; }
        main { padding-top: var(--header-height); }
        .content-wrapper { padding: 2rem 0; min-height: calc(100vh - var(--header-height)); }

        /* Notifications & Language */
        .notification-bell { position: relative; cursor: pointer; font-size: 1.2rem; }
        .notification-dot { position: absolute; top: 0; right: 0; width: 8px; height: 8px; background: var(--error-color); border-radius: 50%; border: 1px solid white; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(229, 62, 62, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(229, 62, 62, 0); } 100% { box-shadow: 0 0 0 0 rgba(229, 62, 62, 0); } }
        .notifications-panel { display: none; position: absolute; top: 50px; right: 0; width: 380px; background: var(--surface-color); border-radius: var(--border-radius-md); box-shadow: var(--shadow-lg); z-index: 1001; overflow: hidden; }
        .notifications-panel.active { display: block; animation: fadeIn 0.3s; }
        .notifications-header { padding: 1rem; font-weight: 600; border-bottom: 1px solid var(--border-color); }
        .notification-list { max-height: 400px; overflow-y: auto; }
        .notification-item { display: flex; gap: 1rem; padding: 1rem; border-bottom: 1px solid var(--border-color); }
        .notification-item:last-child { border: none; }
        .notification-item i { color: var(--primary-color); }
        
        /* Dashboard */
        .dashboard-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; align-items: flex-start; }
        .path-step { display: flex; align-items: center; gap: 1rem; padding: 1rem; border: 1px solid var(--border-color); border-radius: var(--border-radius-md); margin-bottom: 1rem; transition: var(--transition-fast); }
        .path-step:hover { box-shadow: var(--shadow-md); border-color: var(--primary-color); }
        .path-step.done { background: #e8f5e9; border-left: 5px solid var(--success-color); }
        .path-step.active { border-left: 5px solid var(--primary-color); }
        .path-step-icon { font-size: 1.5rem; color: var(--primary-color); }
        .recommendation-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }

        /* Courses */
        .courses-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem; }
        .course-card { background-color: var(--surface-color); border-radius: var(--border-radius-lg); box-shadow: var(--shadow-md); transition: var(--transition-smooth); display: flex; flex-direction: column; overflow: hidden; }
        .course-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); }
        .course-card-banner { height: 150px; background-size: cover; background-position: center; }
        .course-card-content { padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; }
        .progress-bar-container { background-color: var(--border-color); border-radius: 99px; height: 8px; margin: 10px 0; }
        .progress-bar { background: var(--secondary-color); height: 100%; border-radius: 99px; }

        /* Library & Study Rooms */
        .resource-grid, .study-rooms-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
        .resource-card, .room-card { background: var(--surface-color); border-radius: var(--border-radius-md); box-shadow: var(--shadow-sm); overflow: hidden; padding: 1.5rem; }
        .room-members img { width: 30px; height: 30px; border-radius: 50%; border: 2px solid white; margin-left: -10px; }
        
        /* Collaboration */
        .collaboration-layout { display: grid; grid-template-columns: 300px 1fr 2fr; gap: 1rem; height: 75vh; }
        .groups-column, .threads-column, .chat-column { background: var(--surface-color); border-radius: var(--border-radius-lg); box-shadow: var(--shadow-sm); display: flex; flex-direction: column; }
        .column-header { padding: 1rem; border-bottom: 1px solid var(--border-color); font-weight: 600; }
        .groups-list, .threads-list { list-style: none; overflow-y: auto; }
        .groups-list li, .threads-list li { padding: 1rem; cursor: pointer; border-bottom: 1px solid var(--border-color); }
        .groups-list li.active, .threads-list li.active { background-color: var(--primary-color); color: white; }
        .thread-message { padding: 1rem; border-bottom: 1px solid var(--border-color); }
        .thread-message-content { flex-grow: 1; overflow-y: auto; padding: 1rem; }

        /* Floating Action Button (FAB) for Chatbot */
        .fab-chatbot { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: var(--primary-color); color: white; border-radius: 50%; border: none; display: flex; justify-content: center; align-items: center; font-size: 1.8rem; box-shadow: var(--shadow-lg); cursor: pointer; z-index: 1010; transition: var(--transition-smooth); }
        .fab-chatbot:hover { transform: scale(1.1); background: var(--primary-color-dark); }
        .chatbot-window { display: none; position: fixed; bottom: 100px; right: 30px; width: 380px; height: 500px; background: var(--surface-color); border-radius: var(--border-radius-lg); box-shadow: var(--shadow-lg); z-index: 1009; flex-direction: column; overflow: hidden; transform: translateY(20px); opacity: 0; transition: all 0.3s ease-out; }
        .chatbot-window.active { display: flex; transform: translateY(0); opacity: 1; }
        .chatbot-header { padding: 1rem; background: var(--primary-color); color: white; font-weight: 600; }
        .chatbot-display { flex-grow: 1; padding: 1rem; overflow-y: auto; }
        .chatbot-input { display: flex; padding: 1rem; border-top: 1px solid var(--border-color); }
        .chatbot-input input { flex-grow: 1; border: 1px solid var(--border-color); padding: 8px 15px; border-radius: 20px; }

        /* Responsive */
        @media (max-width: 1024px) {
            #main-header nav { display: none; position: fixed; top: var(--header-height); left: 0; width: 100%; height: calc(100vh - var(--header-height)); background-color: var(--surface-color); flex-direction: column; padding-top: 2rem; transform: translateX(-100%); transition: transform 0.3s ease-in-out; z-index: 999; }
            #main-header nav.active { display: flex; transform: translateX(0); }
            #main-header nav ul { flex-direction: column; width: 100%; text-align: center; gap: 0; }
            #main-header nav a { padding: 20px; border-radius: 0; width: 100%; justify-content: center; }
            .menu-toggle { display: block; }
            .dashboard-grid, .collaboration-layout { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <section id="auth-page">
        <div class="auth-container">
            <h1>Bienvenue sur EduSmart.AI</h1>
            <p>Connectez-vous pour commencer votre aventure.</p>
            <form id="login-form">
                <div class="auth-form-group"><input type="email" value="etudiant@edusmart.ai" required></div>
                <div class="auth-form-group"><input type="password" value="password" required></div>
                <button type="submit" class="auth-btn">Se Connecter</button>
            </form>
        </div>
    </section>

    <div id="main-app" class="hidden">
        <header id="main-header">
            <div class="container header-content">
                <div class="logo"><a href="#dashboard">EduSmart.AI</a></div>
                <nav>
                    <ul>
                        <li><a href="#dashboard" class="nav-link"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#courses" class="nav-link"><i class="fas fa-book"></i> Mes Cours</a></li>
                        <li><a href="#library" class="nav-link"><i class="fas fa-photo-film"></i> Médiathèque</a></li>
                        <li><a href="#webinars" class="nav-link"><i class="fas fa-video"></i> Webinaires</a></li>
                        <li><a href="#study-rooms" class="nav-link"><i class="fas fa-users"></i> Salles d'Étude</a></li>
                        <li><a href="#collaboration" class="nav-link"><i class="fas fa-comments"></i> Forum</a></li>
                        <li><a href="#reports" class="nav-link"><i class="fas fa-chart-line"></i> Rapports</a></li>
                        <li><a href="#teachers-ai" class="nav-link"><i class="fas fa-chalkboard-teacher"></i> Espace Profs</a></li>
                    </ul>
                </nav>
                <div class="user-actions">
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        <div class="notification-dot"></div>
                        <div class="notifications-panel">
                            <div class="notifications-header">Notifications</div>
                            <div class="notification-list"></div>
                        </div>
                    </div>
                    <a href="#profile" class="nav-link profile-link"><i class="fas fa-user-circle"></i> Mon Profil</a>
                    <button class="menu-toggle"><i class="fas fa-bars"></i></button>
                </div>
            </div>
        </header>

        <main>
            <section id="dashboard" class="page-section">
                <div class="container content-wrapper">
                    <div class="dashboard-grid">
                        <div class="main-column">
                            <div class="widget">
                                <h3><i class="fas fa-route"></i> Mon Parcours Personnalisé</h3>
                                <div class="path-step done"><div class="path-step-icon"><i class="fas fa-check-circle"></i></div><div><strong>Leçon : Les fonctions dérivées</strong><p>Bravo, vous avez maîtrisé cette notion !</p></div></div>
                                <div class="path-step active"><div class="path-step-icon"><i class="fas fa-pencil-alt"></i></div><div><strong>Quiz : Les fonctions dérivées</strong><p>Évaluez vos compétences pour continuer.</p></div></div>
                                <div class="path-step"><div class="path-step-icon"><i class="fas fa-book"></i></div><div><strong>Prochaine Leçon : Intégration par parties</strong><p>Débloquée après la réussite du quiz.</p></div></div>
                            </div>
                             <div class="widget">
                                <h3><i class="fas fa-star"></i> Recommandé pour vous par l'IA</h3>
                                <div class="recommendation-grid">
                                    <div class="path-step"><div class="path-step-icon"><i class="fas fa-video"></i></div><div><strong>Vidéo : Visualiser les intégrales</strong><p>Physique - Prépa</p></div></div>
                                    <div class="path-step"><div class="path-step-icon"><i class="fas fa-flask"></i></div><div><strong>Simulation : Circuit RLC</strong><p>Électromagnétisme</p></div></div>
                                </div>
                            </div>
                        </div>
                        <div class="sidebar-column">
                            <div class="widget"><h3><i class="far fa-calendar-alt"></i> Agenda</h3><p>Échéance du devoir de Physique demain à 18:00.</p><p>Webinaire "Gestion du Stress" mercredi à 17:00.</p></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="courses" class="page-section hidden">
                <div class="container content-wrapper">
                    <h2>Mes Cours</h2>
                    <div class="courses-grid">
                        <div class="course-card"><div class="course-card-banner" style="background-color: #4A90E2"></div><div class="course-card-content"><h3>Mathématiques - Analyse</h3><p>Avec M. Diallo</p><div class="progress-bar-container"><div class="progress-bar" style="width: 75%;"></div></div></div></div>
                        <div class="course-card"><div class="course-card-banner" style="background-color: #50E3C2"></div><div class="course-card-content"><h3>Physique - Électromagnétisme</h3><p>Avec Mme. Traoré</p><div class="progress-bar-container"><div class="progress-bar" style="width: 40%;"></div></div></div></div>
                        <div class="course-card"><div class="course-card-banner" style="background-color: #E2B44A"></div><div class="course-card-content"><h3>Histoire - XIXe siècle</h3><p>Avec M. Ndiaye</p><div class="progress-bar-container"><div class="progress-bar" style="width: 90%;"></div></div></div></div>
                        <div class="course-card"><div class="course-card-banner" style="background-color: #E53E3E"></div><div class="course-card-content"><h3>Philosophie - Les Lumières</h3><p>Avec Mme. Gaye</p><div class="progress-bar-container"><div class="progress-bar" style="width: 60%;"></div></div></div></div>
                    </div>
                </div>
            </section>

            <section id="library" class="page-section hidden">
                <div class="container content-wrapper">
                    <h2>Médiathèque</h2>
                    <h3><i class="fas fa-video"></i> Vidéos de cours</h3>
                    <div class="resource-grid">
                        <div class="resource-card"><h4>Les Lois de Newton Expliquées</h4><p>Physique</p></div>
                        <div class="resource-card"><h4>Comprendre le Théorème de Thalès</h4><p>Mathématiques</p></div>
                        <div class="resource-card"><h4>La Révolution Française en 15 minutes</h4><p>Histoire</p></div>
                    </div>
                </div>
            </section>

            <section id="webinars" class="page-section hidden">
                <div class="container content-wrapper">
                    <h2>Webinaires</h2>
                    <div class="widget"><h3>En Direct Maintenant : L'art de la dissertation</h3><p>Par M. Diop, expert en méthodologie. Rejoignez plus de 50 étudiants !</p><button class="btn-primary">Rejoindre le direct</button></div>
                </div>
            </section>

            <section id="study-rooms" class="page-section hidden">
                <div class="container content-wrapper">
                    <h2>Salles d'Étude Virtuelles</h2>
                    <div class="study-rooms-grid">
                        <div class="room-card"><div><h4>Révision BAC Maths</h4><small>Focalisation sur l'Analyse</small></div><div class="room-members"><img src="https://i.pravatar.cc/30?u=1"><img src="https://i.pravatar.cc/30?u=2"><span>+3</span></div></div>
                        <div class="room-card"><div><h4>Projet d'Histoire</h4><small>Le XIXe siècle</small></div><div class="room-members"><img src="https://i.pravatar.cc/30?u=3"><img src="https://i.pravatar.cc/30?u=4"></div></div>
                    </div>
                </div>
            </section>

            <section id="collaboration" class="page-section hidden">
                <div class="container content-wrapper">
                    <h2>Forum de Discussion</h2>
                    <div class="collaboration-layout">
                        <div class="groups-column"><div class="column-header">Groupes</div><ul class="groups-list"></ul></div>
                        <div class="threads-column"><div class="column-header">Discussions</div><ul class="threads-list"></ul></div>
                        <div class="chat-column"><div class="column-header">Conversation</div><div class="thread-message-content"></div></div>
                    </div>
                </div>
            </section>

            <section id="reports" class="page-section hidden">
                <div class="container content-wrapper">
                    <h2>Rapports de Performance</h2>
                    <div class="widget"><canvas id="progressChart"></canvas></div>
                </div>
            </section>

            <section id="teachers-ai" class="page-section hidden">
                 <div class="container content-wrapper">
                    <h2>Espace Professeur</h2>
                    <div class="teacher-dashboard-grid">
                        <div class="widget">
                            <h3><i class="fas fa-exclamation-triangle"></i> Vigilance Pédagogique (IA)</h3>
                            <div class="vigilance-item"><strong>Amina K. :</strong> Baisse de 20% aux quiz de Physique.</div>
                        </div>
                        <div class="widget">
                            <h3><i class="fas fa-tasks"></i> Devoirs à Corriger (3)</h3>
                            <div class="room-card"><span>Dissertation Philo - Term L2</span><button class="btn-secondary">Analyser avec l'IA</button></div>
                        </div>
                    </div>
                 </div>
            </section>

            <section id="profile" class="page-section hidden">
                <div class="container content-wrapper">
                    <div class="profile-header">
                        <img src="https://i.pravatar.cc/150?u=a042581f4e29026704d" alt="Avatar" class="profile-avatar">
                        <div><h2>Jean Dupont</h2><p>Étudiant en Classes Prépa</p></div>
                    </div>
                    <div class="widget"><div class="skills-chart-container"><canvas id="skillsChart"></canvas></div></div>
                </div>
            </section>
        </main>

        <button class="fab-chatbot"><i class="fas fa-robot"></i></button>
        <div class="chatbot-window">
            <div class="chatbot-header">EduBot - Votre Assistant IA</div>
            <div class="chatbot-display"></div>
            <div class="chatbot-input"><input type="text" placeholder="Posez une question..."><button><i class="fas fa-paper-plane"></i></button></div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- AUTHENTIFICATION ---
        document.getElementById('login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            document.getElementById('auth-page').classList.add('hidden');
            document.getElementById('main-app').classList.remove('hidden');
            navigateTo(window.location.hash || '#dashboard');
            initializeAll();
        });

        // --- NAVIGATION ---
        const pageSections = document.querySelectorAll('.page-section');
        const navLinks = document.querySelectorAll('.nav-link');
        function navigateTo(hash) {
            if (!hash || hash === '#') hash = '#dashboard';
            pageSections.forEach(s => s.classList.add('hidden'));
            const target = document.querySelector(hash);
            if (target) target.classList.remove('hidden');
            navLinks.forEach(l => l.classList.toggle('active', l.getAttribute('href') === hash));
            if (document.querySelector('#main-header nav').classList.contains('active')) document.querySelector('.menu-toggle').click();
        }
        document.body.addEventListener('click', e => { if (e.target.closest('.nav-link')) { e.preventDefault(); window.location.hash = e.target.closest('.nav-link').getAttribute('href'); } });
        window.addEventListener('hashchange', () => navigateTo(window.location.hash));
        document.querySelector('.menu-toggle').addEventListener('click', () => document.querySelector('#main-header nav').classList.toggle('active'));

        // --- NOTIFICATIONS & CHATBOT ---
        const fabChatbot = document.querySelector('.fab-chatbot');
        const chatbotWindow = document.querySelector('.chatbot-window');
        fabChatbot.addEventListener('click', () => chatbotWindow.classList.toggle('active'));
        const notificationBell = document.querySelector('.notification-bell');
        const notificationsPanel = document.querySelector('.notifications-panel');
        const notificationList = document.querySelector('.notification-list');
        const notificationsData = [
            { icon: 'fa-graduation-cap', text: "<strong>Mme. Traoré</strong> a noté votre devoir de Physique : 15/20." },
            { icon: 'fa-medal', text: "Nouveau badge débloqué : <strong>Marathonien des Maths</strong> !" },
            { icon: 'fa-calendar-alt', text: "Rappel : Webinaire 'Gestion du Stress' demain à 17h." }
        ];
        notificationList.innerHTML = notificationsData.map(n => `<div class="notification-item"><i class="fas ${n.icon}"></i><div>${n.text}</div></div>`).join('');
        notificationBell.addEventListener('click', e => { e.stopPropagation(); notificationsPanel.classList.toggle('active'); });
        document.addEventListener('click', () => notificationsPanel.classList.remove('active'));
        
        // --- FORUM ---
        const collaborationData = {
            'general': { name: 'Forum Général', threads: [{ id: 1, title: 'Ressources pour le BAC', author: 'Amina' }] },
            'maths-prepa': { name: 'Maths - Prépa MPSI', threads: [{ id: 2, title: 'Problème sur les intégrales', author: 'Moussa' }] }
        };
        const messagesData = {
            1: [{ author: 'Amina', text: 'Salut, quelqu\'un a des bons sites pour réviser ?' }, { author: 'Jean', text: 'Oui, regarde sur prepabac.com !' }],
            2: [{ author: 'Moussa', text: 'Je bloque sur cet exercice...' }]
        };
        const groupsList = document.querySelector('.groups-list');
        const threadsList = document.querySelector('.threads-list');
        const chatContent = document.querySelector('.thread-message-content');
        if (groupsList) {
            groupsList.innerHTML = Object.keys(collaborationData).map(k => `<li data-group="${k}">${collaborationData[k].name}</li>`).join('');
            groupsList.addEventListener('click', e => { if (e.target.tagName === 'LI') {
                const gId = e.target.dataset.group;
                document.querySelectorAll('.groups-list li').forEach(li => li.classList.remove('active')); e.target.classList.add('active');
                threadsList.innerHTML = collaborationData[gId].threads.map(t => `<li data-thread="${t.id}">${t.title}</li>`).join('');
                chatContent.innerHTML = '<p style="text-align:center; padding: 2rem;">Sélectionnez une discussion.</p>';
            }});
            threadsList.addEventListener('click', e => { if (e.target.tagName === 'LI') {
                const tId = e.target.dataset.thread;
                document.querySelectorAll('.threads-list li').forEach(li => li.classList.remove('active')); e.target.classList.add('active');
                chatContent.innerHTML = (messagesData[tId] || []).map(m => `<div class="thread-message"><p><strong>${m.author}</strong></p><p>${m.text}</p></div>`).join('');
            }});
        }
        
        // --- CHARTS ---
        function initializeAll() {
            new Chart(document.getElementById('progressChart'), { type: 'line', data: { labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin'], datasets: [{ label: 'Progression des notes', data: [12, 13, 12.5, 14, 15, 16], borderColor: '#4A90E2', tension: 0.1 }] } });
            new Chart(document.getElementById('skillsChart'), { type: 'radar', data: { labels: ['Algèbre', 'Analyse', 'Géométrie', 'Probabilités', 'Logique'], datasets: [{ label: 'Mes Compétences', data: [85, 70, 60, 75, 90], backgroundColor: 'rgba(74, 144, 226, 0.2)', borderColor: '#4A90E2' }] }, options: { scales: { r: { beginAtZero: true, max: 100 } } } });
        }
    });
    </script>
</body>
</html>
